import random
import time
from rich import print
from rich.console import Console
from rich.table import Table
console = Console()
user_wins = 0
computer_wins = 0
user_loses = 0
computer_loses = 0
ties = 0

def get_computer_choice():
    choices = ["rock", "paper", "scissors"]
    computer_choice = random.choice(choices).lower()
    return computer_choice
def get_user_choice():
    print('select a choice\n')
    print('1: rock\n2: paper\n3: scissors\n')
    user_choice = int(input('enter your choice\n'))
    if user_choice == 1:
        user_choice = "rock"
    elif user_choice == 2:
        user_choice = "paper"
    elif user_choice == 3:
        user_choice = "scissors"
    return user_choice

def compare_choices(user_choice, computer_choice):
    global user_wins, computer_wins, user_loses, computer_loses, ties
    if user_choice == computer_choice:
        print(f'you selected {user_choice} and computer selected {computer_choice}')
        print("It's a tie!")
        ties += 1
    elif user_choice == "rock" and computer_choice == "scissors":
        print(f'you selected {user_choice} and computer selected {computer_choice}')
        print("You win!")
        user_wins += 1
        computer_loses += 1
    elif user_choice == "paper" and computer_choice == "rock":
        print(f'you selected {user_choice} and computer selected {computer_choice}')
        print("You win!")
        user_wins += 1
        computer_loses += 1
    elif user_choice == "scissors" and computer_choice == "paper":
        print(f'you selected {user_choice} and computer selected {computer_choice}')
        print("You win!")
        user_wins += 1
        computer_loses += 1
    else:
        print(f'you selected {user_choice} and computer selected {computer_choice}')
        print("You lose!")
        computer_wins += 1
        user_loses += 1
    #return user_wins, computer_wins, user_loses, computer_loses, ties
def play_game():
    print('how many rounds do you want to play?\n')
    rounds = int(input('enter the number of rounds\n'))
    for i in range(rounds):
        time.sleep(1)
        computer_choice = get_computer_choice()
        user_choice = get_user_choice()
        compare_choices(user_choice, computer_choice)
    print('game over')
    print('getting game analysis')
    time.sleep(2)
    table = Table(title="Game Analysis")
    table.add_column("User Wins", style="white", justify="left")
    table.add_column("Computer Wins", style="white", justify="left")
    table.add_column("User Loses", style="white", justify="left")
    table.add_column("Computer Loses", style="white", justify="left")
    table.add_column("Ties", style="white", justify="left")
    table.add_row(str(user_wins), str(computer_wins), str(user_loses), str(computer_loses), str(ties))
    console.print(table)
    # print(f'you won {user_wins} times')
    # print(f'computer won {computer_wins} times')
    # print(f'you lost {user_loses} times')
    # print(f'computer lost {computer_loses} times')
    # print(f'there were {ties} ties')
print("Welcome to Rock, Paper, Scissors!")
while True:
    user_wins = 0
    computer_wins = 0
    user_loses = 0
    computer_loses = 0
    ties = 0
    play_game()
    play_again = input("Do you want to play again? (yes/no): ").lower()
    if play_again != "yes":
        break
